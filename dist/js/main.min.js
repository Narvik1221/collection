(()=>{class t{constructor(){this.products=[],this.currentPage=1,this.productsPerPage=6,this.init()}async init(){console.log("Catalog init started"),await this.loadProducts(),console.log("Products loaded:",this.products.length),this.renderProducts(),this.renderPagination(),this.bindEvents()}async loadProducts(){try{console.log("Loading products from data/products.json");var t=await fetch("/data/products.json");if(!t.ok)throw new Error("HTTP error! status: "+t.status);var e=await t.json();console.log("Products data:",e),this.products=e.products||[],0===this.products.length&&console.warn("No products found in JSON file")}catch(t){console.error("Ошибка загрузки товаров:",t),this.products=this.getFallbackProducts()}}getFallbackProducts(){return[{id:1,name:"Тестовый товар 1",price:1e3,image:"img/products/test1.jpg",description:"Описание тестового товара 1"},{id:2,name:"Тестовый товар 2",price:2e3,image:"img/products/test2.jpg",description:"Описание тестового товара 2"},{id:3,name:"Тестовый товар 3",price:3e3,image:"img/products/test3.jpg",description:"Описание тестового товара 3"}]}renderProducts(){var t,e,o=document.getElementById("products-grid");o?0===this.products.length?o.innerHTML='<div class="no-products">Товары не найдены</div>':(t=(e=(this.currentPage-1)*this.productsPerPage)+this.productsPerPage,e=this.products.slice(e,t),console.log("Rendering products:",e.length),o.innerHTML=e.map(t=>`
                <div class="product-card" data-product-id="${t.id}">
                    <div class="product-card__image">
                        ${t.name}
                    </div>
                    <h3 class="product-card__name">${t.name}</h3>
                    <p class="product-card__description">${t.description}</p>
                    <div class="product-card__price">${this.formatPrice(t.price)} ₽</div>
                    <div class="product-card__actions">
                        <button class="product-card__button product-card__button--cart" aria-label="Добавить в корзину">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg>
                        </button>
                        <button class="product-card__button product-card__button--favorite" aria-label="Добавить в избранное">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            `).join("")):console.error("Element #products-grid not found")}formatPrice(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}renderPagination(){var t=document.getElementById("pagination");if(t){var o=Math.ceil(this.products.length/this.productsPerPage);let e="";e=e+`
                <button class="pagination__button ${1===this.currentPage?"pagination__button--disabled":""}" 
                        data-page="${this.currentPage-1}">
                    Назад
                </button>
            `+'<div class="pagination__pages">';for(let t=1;t<=o;t++)e+=`
                    <button class="pagination__button ${t===this.currentPage?"pagination__button--active":""}" 
                            data-page="${t}">
                        ${t}
                    </button>
                `;e=(e+="</div>")+`
                <button class="pagination__button ${this.currentPage===o?"pagination__button--disabled":""}" 
                        data-page="${this.currentPage+1}">
                    Вперед
                </button>
            `,t.innerHTML=e}}bindEvents(){document.addEventListener("click",t=>{var e;t.target.classList.contains("pagination__button")&&!t.target.classList.contains("pagination__button--disabled")&&(e=parseInt(t.target.dataset.page))&&e!==this.currentPage&&(this.currentPage=e,this.renderProducts(),this.renderPagination(),window.scrollTo({top:0,behavior:"smooth"})),t.target.closest(".product-card")&&(e=t.target.closest(".product-card").dataset.productId,this.openProductPage(e)),t.target.closest(".product-card__button--cart")&&(t.stopPropagation(),e=t.target.closest(".product-card").dataset.productId,this.addToCart(e)),t.target.closest(".product-card__button--favorite")&&(t.stopPropagation(),e=t.target.closest(".product-card").dataset.productId,this.addToFavorite(e))}),document.addEventListener("change",t=>{"checkbox"!==t.target.type&&"range"!==t.target.type||console.log("Фильтр изменен:",t.target)})}openProductPage(t){console.log("Opening product page:",t)}addToCart(t){console.log("Товар добавлен в корзину:",t)}addToFavorite(t){console.log("Товар добавлен в избранное:",t)}}document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, initializing catalog..."),new t})})();class Header{constructor(){this.burger=document.querySelector(".header__burger"),this.nav=document.querySelector(".header__nav"),this.body=document.body,this.init()}init(){this.bindEvents()}bindEvents(){this.burger.addEventListener("click",()=>{this.toggleMenu()}),this.nav.addEventListener("click",t=>{t.target.classList.contains("nav__link")&&this.closeMenu()}),document.addEventListener("click",t=>{!t.target.closest(".header")&&this.nav.classList.contains("active")&&this.closeMenu()}),window.addEventListener("resize",()=>{768<window.innerWidth&&this.closeMenu()})}toggleMenu(){this.burger.classList.toggle("active"),this.nav.classList.toggle("active"),this.body.classList.toggle("menu-open")}closeMenu(){this.burger.classList.remove("active"),this.nav.classList.remove("active"),this.body.classList.remove("menu-open")}}function initSlider(){document.querySelector(".main-slider")&&(new Swiper(".main-slider",{slidesPerView:"auto",centeredSlides:!0,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},effect:"slide",speed:600}),console.log("Слайдер инициализирован"))}function initYandexMap(){let o=document.getElementById("yandex-map");o&&("undefined"==typeof ymaps?console.warn("Yandex Maps API not loaded"):ymaps.ready(function(){try{var t=new ymaps.Map("yandex-map",{center:[55.76,37.64],zoom:10,controls:["zoomControl","fullscreenControl"]}),e=new ymaps.Placemark([55.76,37.64],{hintContent:"Наш магазин",balloonContent:"Мы находимся здесь!"},{preset:"islands#icon",iconColor:"#0095b6"});t.geoObjects.add(e),t.behaviors.disable("scrollZoom"),console.log("Yandex Map initialized successfully")}catch(t){console.error("Error initializing Yandex Map:",t),o.innerHTML='<div class="map-error">Карта временно недоступна</div>'}}))}function loadYandexMapsAPI(){let t=document.getElementById("yandex-map");var e;t&&("undefined"!=typeof ymaps?initYandexMap():((e=document.createElement("script")).src="https://api-maps.yandex.ru/2.1/?apikey=ваш_api_ключ&lang=ru_RU",e.onload=function(){console.log("Yandex Maps API loaded"),initYandexMap()},e.onerror=function(){console.error("Failed to load Yandex Maps API"),t.innerHTML='<div class="map-error">Не удалось загрузить карту</div>'},document.head.appendChild(e)))}document.addEventListener("DOMContentLoaded",()=>{console.log("Header initialized"),new Header}),document.addEventListener("DOMContentLoaded",function(){loadYandexMapsAPI()}),document.addEventListener("DOMContentLoaded",function(){console.log("Магазин инициализирован"),"function"==typeof initSlider&&initSlider()});